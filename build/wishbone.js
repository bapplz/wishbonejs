(function(){this.EventDispatcher=function(){function a(a,b,c){this.eventReceiver=a,this.routes=b,this.instanceBuilder=c}return a.prototype.start=function(){return this.eventReceiver.on("afterEventReceived",this.dispatchEvent.bind(this))},a.prototype.dispatchEvent=function(a){var b,c,d,e;return d=this.routes.getHandler(a.type).name,b=NameExtractor.extract(d),e=b+"View",c=this.instanceBuilder.build(d,e),c.present()},a}()}).call(this),function(){this.EventReceiver=function(){function a(){this.callbacks=[],this.events=[],this.initCallbacksKey("beforeEventReceived"),this.initCallbacksKey("afterEventReceived"),this.initCallbacksKey("beforeEventRemoved")}return a.prototype.on=function(a,b){return this.initCallbacksKey(a),this.callbacks[a].push(b)},a.prototype.trigger=function(a,b){var c,d,e,f,g;d=this.callbacks[a],g=[];for(e=0,f=d.length;e<f;e++)c=d[e],g.push(c(b));return g},a.prototype.receive=function(a){var b;return b=new Object,b.type=a.type,this.trigger("beforeEventReceived",b),this.initCallbacksKey(a.type),this.events.push(a),this.trigger("afterEventReceived",b)},a.prototype.initCallbacksKey=function(a){if(this.callbacks[a]===void 0)return this.callbacks[a]=[]},a.prototype.poll=function(){var a,b;return b=this.events[0],b===void 0?b=null:(a=new Object,a.type=b.type,this.trigger("beforeEventRemoved",a)),this.events.splice(0,1),b},a}()}.call(this),function(){var a=[].slice;this.InstanceBuilder=function(){function b(){}return b.prototype.build=function(){var b,c,d;return b=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],d=b,new window[d](c)},b}()}.call(this),function(){this.NameExtractor=function(){function a(){}return a.extract=function(a){var b;return a===""?a:(b=a.search(/\S[A-Z]\S/)+1,a.slice(0,b))},a}()}.call(this),function(){this.Routes=function(){function a(){this.routes=[]}return a.prototype.add=function(a,b){return this.routes[a]=b},a.prototype.getHandler=function(a){return this.routes[a]},a}()}.call(this);